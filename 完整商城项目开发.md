# 完整商城项目开发

### 1、搭建项目

##### 		1.1 新建小程序项目

##### 		1.2 搭建目录结构

|   目录名   |       作用       |
| :--------: | :--------------: |
|   styles   |   存放公共样式   |
| components |     存放组件     |
|    lib     |   存放第三方库   |
|   utils    |   自己的工具库   |
|  request   | 自己的接口帮助库 |

##### 		1.3 搭建页面

|   页面名称   |     名称     |
| :----------: | :----------: |
|     首页     |    index     |
|   分类页面   |   category   |
| 商品列表页面 |  goods_list  |
| 商品详情页面 | goods_detail |
|  购物车页面  |     cart     |
|   收藏页面   |   collect    |
|   订单页面   |    order     |
|   搜索页面   |    search    |
| 个人中心页面 |     user     |
| 意见反馈页面 |   feedback   |
|   登录页面   |    login     |
|   授权页面   |     auth     |
|   结算页面   |     pay      |

##### 		1.4 引入字体图标并在app.wxss中设置基本样式

```
/**app.wxss**/
@import "./styles/iconfont.wxss";

/* 在微信小程序中不支持通配符 */

page,
view,
text,
swiper,
swiper-item,
image,
navigator {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

/* 主题颜色 通过变量来实现 */
page {
  /* 定义主题颜色 */
  --themeColor: #8651D7;
  /* 定义统一字体大小假设设计稿大小375px */
  font-size: 28rpx;
}
```



##### 		1.5 搭建tabbar结构

### 2、首页

#### 		4.1 效果



##### (1)自定义组件

​	略

##### (2)swiper轮播图的实现：

home.js

```
  data: {
    swiperList: []
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    wx.request({
      url: 'https://api-hmugo-web.itheima.net/api/public/v1/home/swiperdata'
      success: (res) => {
        console.log(res)
        this.setData({
          swiperList: res.data.message
        })
      }
    })
  },
```

home.html

```
<swiper autoplay indicatorDots circular>
        <block wx:for="{{swiperList}}" wx:key="{{item.goods_id}}">
            <swiper-item>
                <navigator class="" target="" url="{{item.navigator_url}}" open-type="navigate">
                    <!-- 设置image的mode为widthFix保持原图宽度和宽高比不变自适应变化 -->
                    <image class="swiper-img" src="{{item.image_src}}" mode="widthFix"></image>
                </navigator>
            </swiper-item>
        </block>
    </swiper>
```

home.wxss

```
swiper {
  /* 将轮播图内的图片高度给swiper 抵消swiper的默认高度*/
  height: 340rpx;
}
.swiper-img {
  /* 将width设置为100%让图片根据屏幕大小自适应变化 */
  width: 100%;
}
```

##### (3)将原生请求修改为promise方式

```

// 在request中，新建文件，将原生请求修改为promise请求
export const request=(params)=>{
  return new Promise((resolve,reject)=>{
    wx.request({
      ...params,
      success: (res)=>{
        resolve(res)
      },
      fail:(err)=>{
        reject(err)
      }
    })
  })
}
```

```
// 引入用来发送请求的方法
import {request} from '../../request/request.js'
// 在onLoad中使用
    request({ url:'https://api-hmugo-web.itheima.net/api/public/v1/home/swiperdata'}).then(res=>{
      this.setData({
        swiperList: res.data.message
      })
    })
```

(4)